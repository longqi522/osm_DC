----choose a polygon from the planet_osm_polygon table and using ST_Intersect to compare its lat/long with the geom information of planet_osm_line table to get the intersection between roads and polygon. 

SELECT
  ST_Intersects(r.geom, m.geom), a.osm_id, a.name
FROM
  planet_osm_line AS a,
  planet_osm_polygon AS b
WHERE b.geom = 'POLYGON((-77.0690247 38.9038089,-77.0689983 38.903802,-77.0689732 38.9037904,-77.0689328 38.9037761,-77.0689201 38.9037778,-77.0688988 38.9037807,-77.0688649 38.9037732,-77.0687687 38.9037414,-77.0687 38.903715,-77.0686754 38.9037094,-77.068648 38.9037063,-77.0686201 38.9036973,-77.0685905 38.9036889,-77.0685347 38.9036677,-77.0685085 38.9036555,-77.0681713 38.9035515,-77.0676798 38.9034185,-77.0676774 38.903333,-77.06733 38.9032215,-77.0668608 38.9030795,-77.0668283 38.9031437,-77.0667513 38.9031293,-77.0667455 38.9031399,-77.0665191 38.903087,-77.0663994 38.9030577,-77.0662461 38.9029825,-77.0661193 38.9029106,-77.0660791 38.9028383,-77.0660638 38.9028275,-77.0660485 38.9028165,-77.0660247 38.9028076,-77.0658888 38.9027564,-77.0657611 38.9027127,-77.0657345 38.902713,-77.0657263 38.9027117,-77.0656815 38.9026964,-77.0655302 38.9026354,-77.0654508 38.9026058,-77.0654213 38.902598,-77.0653902 38.9025916,-77.0653472 38.9025811,-77.0652956 38.9025637,-77.0652634 38.9025525,-77.065234 38.9025433,-77.0651974 38.9025229,-77.0651589 38.9024966,-77.0651406 38.9024855,-77.0651208 38.9024748,-77.0650908 38.9024629,-77.0650627 38.9024543,-77.0650359 38.9024494,-77.0649984 38.9024429,-77.0649693 38.9024345,-77.0649424 38.9024291,-77.0649118 38.9024218,-77.0648788 38.9024127,-77.0648469 38.9024095,-77.0648137 38.9024178,-77.0647931 38.9024262,-77.0647593 38.9024269,-77.064434 38.9023681,-77.0643688 38.9023572,-77.064198 38.9023243,-77.0636667 38.9022219,-77.0632355 38.9021402,-77.0628791 38.9020684,-77.0628758 38.9020924,-77.0627368 38.9020638,-77.0625882 38.9020149,-77.062305 38.9019196,-77.0618075 38.9017366,-77.0617718 38.9017081,-77.0617364 38.9016907,-77.0616943 38.9016716,-77.0616505 38.901655,-77.0616052 38.9016411,-77.0615586 38.9016299,-77.0614295 38.9016076,-77.0614011 38.9016063,-77.0613814 38.901605,-77.0613678 38.9016038,-77.0613476 38.9016027,-77.0613274 38.9016022,-77.0613073 38.9016023,-77.0612872 38.9016031,-77.0612672 38.9016044,-77.0612471 38.9016065,-77.0612326 38.9024735,-77.0628762 38.9024988,-77.0635311 38.9026202,-77.0647699 38.9028995,-77.0658374 38.9032919,-77.0660251 38.9033546,-77.0664939 38.9034791,-77.0681548 38.9038012,-77.0686323 38.9038806,-77.0688033 38.9039008,-77.0688943 38.9039035,-77.068953 38.9038988,-77.0689856 38.9038877,-77.0690077 38.9038437,-77.0690247 38.9038089))' 
AND ST_Intersects(a.geom, b.geom);

--choose a road_id from the previous intersection roads, use ST_Intersects to get the roads intersect with it and use ST_Within to make sure all the intersect roads are within the polygon we chose before.

SELECT
  ST_Intersects(a.geom, b.geom),
  ST_Within(a.geom, c.geom),
  a.osm_id, a.name
FROM
  planet_osm_line AS a,
  planet_osm_line AS b,
  planet_osm_polygon AS c
WHERE b.osm_id = 107119116
AND c.geom = 'POLYGON((-77.0690247 38.9038089,-77.0689983 38.903802,-77.0689732 38.9037904,-77.0689328 38.9037761,-77.0689201 38.9037778,-77.0688988 38.9037807,-77.0688649 38.9037732,-77.0687687 38.9037414,-77.0687 38.903715,-77.0686754 38.9037094,-77.068648 38.9037063,-77.0686201 38.9036973,-77.0685905 38.9036889,-77.0685347 38.9036677,-77.0685085 38.9036555,-77.0681713 38.9035515,-77.0676798 38.9034185,-77.0676774 38.903333,-77.06733 38.9032215,-77.0668608 38.9030795,-77.0668283 38.9031437,-77.0667513 38.9031293,-77.0667455 38.9031399,-77.0665191 38.903087,-77.0663994 38.9030577,-77.0662461 38.9029825,-77.0661193 38.9029106,-77.0660791 38.9028383,-77.0660638 38.9028275,-77.0660485 38.9028165,-77.0660247 38.9028076,-77.0658888 38.9027564,-77.0657611 38.9027127,-77.0657345 38.902713,-77.0657263 38.9027117,-77.0656815 38.9026964,-77.0655302 38.9026354,-77.0654508 38.9026058,-77.0654213 38.902598,-77.0653902 38.9025916,-77.0653472 38.9025811,-77.0652956 38.9025637,-77.0652634 38.9025525,-77.065234 38.9025433,-77.0651974 38.9025229,-77.0651589 38.9024966,-77.0651406 38.9024855,-77.0651208 38.9024748,-77.0650908 38.9024629,-77.0650627 38.9024543,-77.0650359 38.9024494,-77.0649984 38.9024429,-77.0649693 38.9024345,-77.0649424 38.9024291,-77.0649118 38.9024218,-77.0648788 38.9024127,-77.0648469 38.9024095,-77.0648137 38.9024178,-77.0647931 38.9024262,-77.0647593 38.9024269,-77.064434 38.9023681,-77.0643688 38.9023572,-77.064198 38.9023243,-77.0636667 38.9022219,-77.0632355 38.9021402,-77.0628791 38.9020684,-77.0628758 38.9020924,-77.0627368 38.9020638,-77.0625882 38.9020149,-77.062305 38.9019196,-77.0618075 38.9017366,-77.0617718 38.9017081,-77.0617364 38.9016907,-77.0616943 38.9016716,-77.0616505 38.901655,-77.0616052 38.9016411,-77.0615586 38.9016299,-77.0614295 38.9016076,-77.0614011 38.9016063,-77.0613814 38.901605,-77.0613678 38.9016038,-77.0613476 38.9016027,-77.0613274 38.9016022,-77.0613073 38.9016023,-77.0612872 38.9016031,-77.0612672 38.9016044,-77.0612471 38.9016065,-77.0612326 38.9024735,-77.0628762 38.9024988,-77.0635311 38.9026202,-77.0647699 38.9028995,-77.0658374 38.9032919,-77.0660251 38.9033546,-77.0664939 38.9034791,-77.0681548 38.9038012,-77.0686323 38.9038806,-77.0688033 38.9039008,-77.0688943 38.9039035,-77.068953 38.9038988,-77.0689856 38.9038877,-77.0690077 38.9038437,-77.0690247 38.9038089))'
AND ST_Within(a.geom, c.geom)
AND ST_Intersects(a.geom, b.geom)
AND a.osm_id != b.osm_id;

  
-- find the beginning and endpoint of the road, and find the lines that are intersect with these two points within the range of a polygon. 

SELECT
  (ST_Touches(ST_AsText(ST_Endpoint(b.geom)), a.geom) OR ST_Touches(ST_AsText(ST_Startpoint(b.geom)), a.geom)),
  ST_Within(a.geom, c.geom),
  a.osm_id, a.name
FROM
  planet_osm_line AS a,
  planet_osm_line AS b,
  planet_osm_polygon AS c
WHERE b.osm_id = 107119116
   AND c.geom = 'POLYGON((-77.0690247 38.9038089,-77.0689983 38.903802,-77.0689732 38.9037904,-77.0689328 38.9037761,-77.0689201 38.9037778,-77.0688988 38.9037807,-77.0688649 38.9037732,-77.0687687 38.9037414,-77.0687 38.903715,-77.0686754 38.9037094,-77.068648 38.9037063,-77.0686201 38.9036973,-77.0685905 38.9036889,-77.0685347 38.9036677,-77.0685085 38.9036555,-77.0681713 38.9035515,-77.0676798 38.9034185,-77.0676774 38.903333,-77.06733 38.9032215,-77.0668608 38.9030795,-77.0668283 38.9031437,-77.0667513 38.9031293,-77.0667455 38.9031399,-77.0665191 38.903087,-77.0663994 38.9030577,-77.0662461 38.9029825,-77.0661193 38.9029106,-77.0660791 38.9028383,-77.0660638 38.9028275,-77.0660485 38.9028165,-77.0660247 38.9028076,-77.0658888 38.9027564,-77.0657611 38.9027127,-77.0657345 38.902713,-77.0657263 38.9027117,-77.0656815 38.9026964,-77.0655302 38.9026354,-77.0654508 38.9026058,-77.0654213 38.902598,-77.0653902 38.9025916,-77.0653472 38.9025811,-77.0652956 38.9025637,-77.0652634 38.9025525,-77.065234 38.9025433,-77.0651974 38.9025229,-77.0651589 38.9024966,-77.0651406 38.9024855,-77.0651208 38.9024748,-77.0650908 38.9024629,-77.0650627 38.9024543,-77.0650359 38.9024494,-77.0649984 38.9024429,-77.0649693 38.9024345,-77.0649424 38.9024291,-77.0649118 38.9024218,-77.0648788 38.9024127,-77.0648469 38.9024095,-77.0648137 38.9024178,-77.0647931 38.9024262,-77.0647593 38.9024269,-77.064434 38.9023681,-77.0643688 38.9023572,-77.064198 38.9023243,-77.0636667 38.9022219,-77.0632355 38.9021402,-77.0628791 38.9020684,-77.0628758 38.9020924,-77.0627368 38.9020638,-77.0625882 38.9020149,-77.062305 38.9019196,-77.0618075 38.9017366,-77.0617718 38.9017081,-77.0617364 38.9016907,-77.0616943 38.9016716,-77.0616505 38.901655,-77.0616052 38.9016411,-77.0615586 38.9016299,-77.0614295 38.9016076,-77.0614011 38.9016063,-77.0613814 38.901605,-77.0613678 38.9016038,-77.0613476 38.9016027,-77.0613274 38.9016022,-77.0613073 38.9016023,-77.0612872 38.9016031,-77.0612672 38.9016044,-77.0612471 38.9016065,-77.0612326 38.9024735,-77.0628762 38.9024988,-77.0635311 38.9026202,-77.0647699 38.9028995,-77.0658374 38.9032919,-77.0660251 38.9033546,-77.0664939 38.9034791,-77.0681548 38.9038012,-77.0686323 38.9038806,-77.0688033 38.9039008,-77.0688943 38.9039035,-77.068953 38.9038988,-77.0689856 38.9038877,-77.0690077 38.9038437,-77.0690247 38.9038089))))'
   AND (ST_Touches(ST_AsText(ST_Endpoint(b.geom)), a.geom) OR ST_Touches(ST_AsText(ST_Startpoint(b.geom)), a.geom))
   
AND ST_Within(a.geom, c.geom);
